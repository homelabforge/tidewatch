import{u as Pe,a as m,j as e}from"./index-CGBKEoxX.js";import{r as c}from"./router-vendor-B592UMyg.js";import{t as o,R as g,s as P,r as k,u as I,v as Y,B as J,D as z,w as T,x as A,M as ce,y as oe,I as j,f as xe,z as $,j as Ie,F as Q,G as ze,J as Le,K as Ve,L as He,N as Ge,U as Oe,O as We,Q as qe,k as Ke,X as me,S as Xe}from"./ui-vendor-C8hJcGlO.js";import{a as w}from"./utils-vendor-DnsfCnls.js";import"./react-vendor-OvXVS5lI.js";function st(){const[b,ue]=c.useState("system"),[he,Z]=c.useState(!0),[i,ee]=c.useState(!1),{theme:L,setTheme:te}=Pe(),[s,V]=c.useState({}),[u,pe]=c.useState([]),[_,be]=c.useState(new Set),[Ye,fe]=c.useState(!1),[H,je]=c.useState(!1),[G,ge]=c.useState(!1),[O,Ne]=c.useState(!1),[W,ye]=c.useState(!1),[h,ve]=c.useState(null),[ke,se]=c.useState(!1),[q,ae]=c.useState(!1),[F,ie]=c.useState(!1),K=c.useRef(null),[we,M]=c.useState(!1),[_e,B]=c.useState(!1),[f,N]=c.useState(null),[y,Ce]=c.useState(null),[Se,le]=c.useState(!1),[de,re]=c.useState(!1),X=c.useRef({}),R=t=>{if(t===0)return"0 B";const r=1024,l=["B","KB","MB","GB"],a=Math.floor(Math.log(t)/Math.log(r));return`${(t/Math.pow(r,a)).toFixed(2)} ${l[a]}`},De=[{id:"system",label:"System",icon:P},{id:"updates",label:"Updates",icon:k},{id:"docker",label:"Docker",icon:I},{id:"integrations",label:"Integrations",icon:Y},{id:"notifications",label:"Notifications",icon:J},{id:"backup",label:"Backup & Maintenance",icon:z}];c.useEffect(()=>{U()},[]),c.useEffect(()=>{b==="backup"&&v()},[b]),c.useEffect(()=>{b==="updates"&&ne()},[b]);const U=async()=>{try{Z(!0);const t=await m.settings.getAll();pe([]);const r={};t.forEach(l=>{let a=l.value;a==="true"?a=!0:a==="false"?a=!1:!isNaN(Number(a))&&a!==""&&(a=Number(a)),r[l.key]=a}),V(r)}catch(t){console.error("Failed to load settings:",t),o.error("Failed to load settings")}finally{Z(!1)}},C=t=>{be(r=>{const l=new Set(r);return l.has(t)?l.delete(t):l.add(t),l})},S=t=>({system:P,docker:I,updates:k,cleanup:Q,registry:I,integrations:Y,notifications:J,backup:z})[t]||Xe,D=t=>({system:"System Configuration",docker:"Docker Settings",updates:"Update Management",cleanup:"Cleanup & Maintenance",registry:"Registry Authentication",integrations:"Integrations",notifications:"Notifications",backup:"Backup Settings"})[t]||t.charAt(0).toUpperCase()+t.slice(1),n=async(t,r,l=!0)=>{try{ee(!0);const a=String(r);await m.settings.update(t,a),l&&V(d=>({...d,[t]:r})),o.success("Setting updated successfully")}catch(a){console.error(`Failed to update ${t}:`,a),o.error("Failed to update setting"),await U()}finally{ee(!1)}},x=(t,r)=>{V(l=>({...l,[t]:r})),X.current[t]&&clearTimeout(X.current[t]),X.current[t]=setTimeout(async()=>{if(await n(t,r,!1),t==="check_schedule")try{await m.updates.reloadScheduler(),o.success("Scheduler reloaded with new schedule"),await ne()}catch(l){console.error("Failed to reload scheduler:",l),o.error("Failed to reload scheduler")}},1e3)},v=async()=>{try{se(!0);const t=await m.backup.list();ve(t)}catch(t){console.error("Failed to load backups:",t),o.error("Failed to load backups")}finally{se(!1)}},ne=async()=>{try{le(!0);const t=await m.updates.getSchedulerStatus();Ce(t.scheduler)}catch(t){console.error("Failed to load scheduler status:",t)}finally{le(!1)}},Te=async()=>{if(confirm("Are you sure you want to reset ALL settings to defaults? This action cannot be undone."))try{const t=await m.settings.reset();o.success(t.message||"Settings reset to defaults"),await U()}catch(t){console.error("Failed to reset settings:",t),o.error("Failed to reset settings")}},Ae=async()=>{try{ae(!0);const t=await m.backup.create();o.success(t.message),await v()}catch(t){console.error("Failed to create backup:",t),o.error("Failed to create backup")}finally{ae(!1)}},$e=async t=>{const r=t.target.files?.[0];if(r)try{ie(!0),await m.backup.upload(r),o.success("Backup uploaded successfully"),await v()}catch(l){console.error("Failed to upload backup:",l),o.error("Failed to upload backup")}finally{ie(!1),K.current&&(K.current.value="")}},Fe=t=>{const r=m.backup.download(t),l=document.createElement("a");l.href=r,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),o.success("Backup download started")},Me=t=>{N(t),B(!0)},Be=t=>{if(t.is_safety){o.error("Safety backups cannot be deleted");return}N(t),M(!0)},Re=async()=>{if(f)try{const t=await m.backup.restore(f.filename);o.success(t.message),await U(),await v(),B(!1),N(null)}catch(t){console.error("Failed to restore backup:",t),o.error("Failed to restore backup")}},Ue=async()=>{if(f)try{const t=await m.backup.delete(f.filename);o.success(t.message),await v(),M(!1),N(null)}catch(t){console.error("Failed to delete backup:",t),o.error("Failed to delete backup")}},E=async t=>{const r={docker:fe,dockerhub:je,ghcr:ge,vulnforge:Ne,ntfy:ye}[t],l={docker:m.settings.testDocker,dockerhub:m.settings.testDockerHub,ghcr:m.settings.testGHCR,vulnforge:m.settings.testVulnForge,ntfy:m.settings.testNtfy}[t];try{r(!0);const a=await l();a.success?o.success(a.message,{description:a.details?Object.entries(a.details).map(([d,p])=>`${d}: ${p}`).join(", "):void 0}):o.error(a.message,{description:a.details?Object.entries(a.details).map(([d,p])=>`${d}: ${p}`).join(", "):void 0})}catch(a){console.error(`Failed to test ${t} connection:`,a),o.error(`Failed to test ${t} connection`)}finally{r(!1)}},Ee=async()=>{try{re(!0);const t=await m.containers.scanMyProjects();if(t.success){const{added:r,updated:l,skipped:a,errors:d}=t.results;o.success("Project scan completed",{description:`Added: ${r}, Updated: ${l}, Skipped: ${a}${d?`, Errors: ${d.length}`:""}`})}else o.error("Failed to scan projects")}catch(t){console.error("Failed to scan my projects:",t),o.error("Failed to scan my projects")}finally{re(!1)}};return he?e.jsx("div",{className:"min-h-screen bg-tide-bg flex items-center justify-center",children:e.jsx(g,{className:"animate-spin text-primary",size:48})}):e.jsxs("div",{className:"min-h-screen bg-tide-bg",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-tide-text mb-2",children:"Settings"}),e.jsx("p",{className:"text-tide-text-muted",children:"Configure TideWatch to match your needs"})]}),e.jsx("div",{className:"border-b border-tide-border mb-6",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:De.map(t=>{const r=t.icon,l=b===t.id;return e.jsxs("button",{onClick:()=>ue(t.id),className:`flex items-center gap-2 px-1 py-4 border-b-2 font-medium text-sm transition-colors ${l?"border-primary text-primary":"border-transparent text-tide-text-muted hover:text-tide-text hover:border-tide-border"}`,children:[e.jsx(r,{size:18}),t.label]},t.id)})})}),e.jsxs("div",{className:"bg-tide-surface-light rounded-lg p-6 mt-6",children:[u.length>0&&e.jsx("div",{className:"mb-6 pb-6 border-b border-tide-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-tide-text mb-1",children:"Settings Organization"}),e.jsx("p",{className:"text-xs text-tide-text-muted",children:"Settings are grouped by category. Click to expand/collapse sections."})]}),e.jsx("div",{className:"text-xs text-teal-400 bg-teal-500/10 px-3 py-1 rounded-full border border-teal-500/30",children:"EXPERIMENTAL"})]})}),b==="system"&&e.jsxs("div",{className:"space-y-6",children:[u.length>0&&e.jsx("div",{className:"space-y-4",children:u.filter(t=>t.category==="system"||t.category==="docker").map(t=>{const r=S(t.category),l=_.has(t.category);return e.jsxs("div",{className:"bg-tide-surface/50 rounded-lg border border-tide-border",children:[e.jsxs("button",{onClick:()=>C(t.category),className:"w-full flex items-center justify-between p-4 hover:bg-tide-surface/70 transition-colors rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(r,{className:"w-5 h-5 text-teal-400"}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-sm font-semibold text-tide-text",children:D(t.category)}),e.jsxs("p",{className:"text-xs text-tide-text-muted mt-0.5",children:[t.settings.length," ",t.settings.length===1?"setting":"settings"]})]})]}),l?e.jsx(T,{className:"w-5 h-5 text-tide-text-muted"}):e.jsx(A,{className:"w-5 h-5 text-tide-text-muted"})]}),!l&&e.jsx("div",{className:"p-4 pt-0 space-y-4",children:t.settings.map(a=>e.jsx("div",{className:"bg-tide-surface/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text",children:a.key.split("_").map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" ")}),a.description&&e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:a.description})]}),e.jsxs("div",{className:"flex-shrink-0",children:[typeof s[a.key]=="boolean"&&e.jsx("button",{type:"button",onClick:()=>n(a.key,!s[a.key]),disabled:i,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${s[a.key]?"bg-teal-500":"bg-red-500"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s[a.key]?"translate-x-6":"translate-x-1"}`})}),typeof s[a.key]!="boolean"&&e.jsx("input",{type:typeof s[a.key]=="number"?"number":"text",value:s[a.key]||"",onChange:d=>{const p=typeof s[a.key]=="number"?parseInt(d.target.value)||0:d.target.value;x(a.key,String(p))},disabled:i,className:"w-48 bg-tide-surface text-tide-text text-sm rounded px-3 py-1.5 border border-tide-border-light focus:border-teal-500 focus:outline-none"})]})]})},a.key))})]},t.category)})}),u.length===0&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-tide-surface rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[L==="dark"?e.jsx(ce,{className:"w-6 h-6 text-teal-500"}):e.jsx(oe,{className:"w-6 h-6 text-teal-500"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-tide-text",children:"Theme"}),e.jsx("p",{className:"text-sm text-tide-text-muted mt-0.5",children:"Choose your preferred interface theme"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>te("dark"),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 transition-all ${L==="dark"?"border-primary bg-primary/10 text-primary":"border-tide-border-light bg-tide-surface text-tide-text hover:border-tide-border-light"}`,children:[e.jsx(ce,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Dark"})]}),e.jsxs("button",{onClick:()=>te("light"),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 transition-all ${L==="light"?"border-primary bg-primary/10 text-primary":"border-tide-border-light bg-tide-surface text-tide-text hover:border-tide-border-light"}`,children:[e.jsx(oe,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Light"})]})]})]}),e.jsxs("div",{className:"bg-tide-surface rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(P,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-tide-text",children:"Timezone"}),e.jsx("p",{className:"text-sm text-tide-text-muted mt-0.5",children:"Set system timezone for schedules and timestamps"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text mb-2",children:"Timezone"}),e.jsxs("select",{value:s.timezone||"UTC",onChange:t=>n("timezone",t.target.value),className:"w-full bg-tide-surface text-tide-text rounded px-3 py-2 border border-tide-border-light focus:border-blue-500 focus:outline-none",children:[e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"America/New_York",children:"America/New_York (EST/EDT)"}),e.jsx("option",{value:"America/Chicago",children:"America/Chicago (CST/CDT)"}),e.jsx("option",{value:"America/Denver",children:"America/Denver (MST/MDT)"}),e.jsx("option",{value:"America/Los_Angeles",children:"America/Los_Angeles (PST/PDT)"}),e.jsx("option",{value:"Europe/London",children:"Europe/London"}),e.jsx("option",{value:"Europe/Paris",children:"Europe/Paris"}),e.jsx("option",{value:"Asia/Tokyo",children:"Asia/Tokyo"}),e.jsx("option",{value:"Asia/Shanghai",children:"Asia/Shanghai"}),e.jsx("option",{value:"Australia/Sydney",children:"Australia/Sydney"})]}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:"Used for displaying times and scheduling updates"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text mb-2",children:"Custom Timezone (IANA format)"}),e.jsx("input",{type:"text",placeholder:"e.g., America/Phoenix",value:s.timezone||"",onChange:t=>n("timezone",t.target.value),className:"w-full bg-tide-surface text-tide-text rounded px-3 py-2 border border-tide-border-light focus:border-blue-500 focus:outline-none"}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:"Override with any IANA timezone identifier"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.jsxs("div",{className:"bg-tide-surface/50 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-medium text-tide-text mb-2 flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4 text-blue-500"}),"Timezone Configuration"]}),e.jsxs("ul",{className:"text-sm text-tide-text-muted space-y-1 ml-6 list-disc",children:[e.jsx("li",{children:"Affects log timestamps and scheduled task times"}),e.jsx("li",{children:"Use dropdown for common timezones or enter custom IANA identifier"}),e.jsx("li",{children:"Changes apply immediately to new timestamps"})]})]})})]}),e.jsxs("div",{className:"border border-red-500/30 bg-red-500/5 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx(xe,{className:"w-6 h-6 text-red-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-semibold text-red-500 mb-1",children:"Danger Zone"}),e.jsx("p",{className:"text-sm text-tide-text-muted",children:"Destructive actions that cannot be undone"})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-tide-surface/50 rounded-lg border border-tide-border",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-tide-text mb-1",children:"Reset All Settings"}),e.jsx("p",{className:"text-xs text-tide-text-muted",children:"Restore all configuration settings to their default values"})]}),e.jsxs("button",{onClick:Te,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-tide-text rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"}),"Reset to Defaults"]})]})})]})]}),b==="updates"&&e.jsxs("div",{className:"space-y-6",children:[!Se&&y&&e.jsx("div",{className:"bg-tide-surface/50 border border-tide-border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(g,{className:`w-5 h-5 ${y.running?"text-green-500":"text-tide-text-muted"}`}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-tide-text",children:"Update Scheduler"}),e.jsx("p",{className:"text-xs text-tide-text-muted",children:"Background update checking service"})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-tide-text-muted",children:"Status"}),e.jsx("p",{className:"text-sm font-medium text-tide-text",children:y.running?e.jsx("span",{className:"text-green-500",children:"● Running"}):e.jsx("span",{className:"text-tide-text-muted",children:"⏸ Paused"})})]}),y.next_run&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-tide-text-muted",children:"Next Run"}),e.jsx("p",{className:"text-sm font-medium text-tide-text",children:w(new Date(y.next_run),{addSuffix:!0})})]}),y.last_check&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-tide-text-muted",children:"Last Check"}),e.jsx("p",{className:"text-sm font-medium text-tide-text",children:w(new Date(y.last_check),{addSuffix:!0})})]})]})]})}),u.length>0&&e.jsx("div",{className:"space-y-4",children:u.filter(t=>t.category==="updates"||t.category==="cleanup").map(t=>{const r=S(t.category),l=_.has(t.category);return e.jsxs("div",{className:"bg-tide-surface/50 rounded-lg border border-tide-border",children:[e.jsxs("button",{onClick:()=>C(t.category),className:"w-full flex items-center justify-between p-4 hover:bg-tide-surface/70 transition-colors rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(r,{className:"w-5 h-5 text-teal-400"}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-sm font-semibold text-tide-text",children:D(t.category)}),e.jsxs("p",{className:"text-xs text-tide-text-muted mt-0.5",children:[t.settings.length," ",t.settings.length===1?"setting":"settings"]})]})]}),l?e.jsx(T,{className:"w-5 h-5 text-tide-text-muted"}):e.jsx(A,{className:"w-5 h-5 text-tide-text-muted"})]}),!l&&e.jsx("div",{className:"p-4 pt-0 space-y-4",children:t.settings.map(a=>e.jsx("div",{className:"bg-tide-surface/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text",children:a.key.split("_").map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" ")}),a.description&&e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:a.description})]}),e.jsxs("div",{className:"flex-shrink-0",children:[typeof s[a.key]=="boolean"&&e.jsx("button",{type:"button",onClick:()=>n(a.key,!s[a.key]),disabled:i,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${s[a.key]?"bg-teal-500":"bg-red-500"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s[a.key]?"translate-x-6":"translate-x-1"}`})}),typeof s[a.key]!="boolean"&&e.jsx("input",{type:typeof s[a.key]=="number"?"number":"text",value:s[a.key]||"",onChange:d=>{const p=typeof s[a.key]=="number"?parseInt(d.target.value)||0:d.target.value;x(a.key,String(p))},disabled:i,className:"w-48 bg-tide-surface text-tide-text text-sm rounded px-3 py-1.5 border border-tide-border-light focus:border-teal-500 focus:outline-none"})]})]})},a.key))})]},t.category)})}),u.length===0&&e.jsxs("div",{className:"columns-1 xl:columns-2 gap-6",style:{columnGap:"1.5rem"},children:[e.jsxs("div",{className:"bg-tide-surface rounded-lg p-6 break-inside-avoid mb-6 border border-tide-border",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(k,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-tide-text",children:"Update Checks"}),e.jsx("p",{className:"text-sm text-tide-text-muted mt-0.5",children:"Configure how often to check for updates"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text",children:"Check Enabled"}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:"Automatically check for container image updates"})]}),e.jsx("button",{type:"button",onClick:()=>n("check_enabled",!s.check_enabled),disabled:i,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${s.check_enabled?"bg-teal-500":"bg-red-500"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s.check_enabled?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text mb-2",children:"Check Schedule"}),e.jsx("input",{type:"text",value:s.check_schedule||"",onChange:t=>x("check_schedule",t.target.value),disabled:i,className:"w-full bg-tide-surface text-tide-text rounded px-3 py-2 border border-tide-border-light focus:border-blue-500 focus:outline-none",placeholder:"0 */6 * * *"}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:"Cron expression for update checks"})]})]})]}),e.jsxs("div",{className:"bg-tide-surface rounded-lg p-6 break-inside-avoid mb-6 border border-tide-border",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx($,{className:"w-6 h-6 text-green-500"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-tide-text",children:"Automatic Updates"}),e.jsx("p",{className:"text-sm text-tide-text-muted mt-0.5",children:"Configure automatic update behavior"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text",children:"Auto Update Enabled"}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:"Automatically apply approved updates"})]}),e.jsx("button",{type:"button",onClick:()=>n("auto_update_enabled",!s.auto_update_enabled),disabled:i,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${s.auto_update_enabled?"bg-teal-500":"bg-red-500"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s.auto_update_enabled?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text",children:"Max Concurrent Updates"}),e.jsx("span",{className:"text-sm text-tide-text-muted",children:s.auto_update_max_concurrent||3})]}),e.jsx("input",{type:"range",min:"1",max:"10",value:s.auto_update_max_concurrent||3,onChange:t=>n("auto_update_max_concurrent",parseInt(t.target.value)),disabled:i,className:"w-full h-2 bg-tide-surface rounded-lg appearance-none cursor-pointer accent-teal-500"}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:"Maximum number of updates to auto-apply per run (rate limiting)"})]})]})]}),e.jsxs("div",{className:"bg-tide-surface rounded-lg p-6 break-inside-avoid mb-6 border border-tide-border",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(k,{className:"w-6 h-6 text-orange-500"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-tide-text",children:"Retry Configuration"}),e.jsx("p",{className:"text-sm text-tide-text-muted mt-0.5",children:"Configure automatic retry behavior for failed updates"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text",children:"Max Retry Attempts"}),e.jsx("span",{className:"text-sm text-tide-text-muted",children:s.update_retry_max_attempts||4})]}),e.jsx("input",{type:"range",min:"0",max:"10",value:s.update_retry_max_attempts||4,onChange:t=>n("update_retry_max_attempts",parseInt(t.target.value)),disabled:i,className:"w-full h-2 bg-tide-surface rounded-lg appearance-none cursor-pointer accent-teal-500"}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:"Maximum number of automatic retry attempts (0-10)"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text",children:"Backoff Multiplier"}),e.jsx("span",{className:"text-sm text-tide-text-muted",children:s.update_retry_backoff_multiplier||3})]}),e.jsx("input",{type:"range",min:"1",max:"10",step:"0.5",value:s.update_retry_backoff_multiplier||3,onChange:t=>n("update_retry_backoff_multiplier",parseFloat(t.target.value)),disabled:i,className:"w-full h-2 bg-tide-surface rounded-lg appearance-none cursor-pointer accent-teal-500"}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:"Exponential backoff multiplier for retry delays (1.0-5min, 15min, 1hr, 4hr)"})]})]})]}),e.jsxs("div",{className:"bg-tide-surface rounded-lg p-6 break-inside-avoid mb-6 border border-tide-border",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ie,{className:"w-6 h-6 text-purple-500"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-tide-text",children:"Default Update Window"}),e.jsx("p",{className:"text-sm text-tide-text-muted mt-0.5",children:"Configure default time restrictions for updates"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text mb-2",children:"Default Window"}),e.jsx("input",{type:"text",value:s.default_update_window||"",onChange:t=>x("default_update_window",t.target.value),disabled:i,className:"w-full bg-tide-surface text-tide-text rounded px-3 py-2 border border-tide-border-light focus:border-purple-500 focus:outline-none",placeholder:'Time range (e.g., "02:00-06:00")'}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:'Time range when updates are allowed (e.g., "02:00-06:00" or "Sat-Sun:00:00-23:59")'})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text mb-2",children:"Window Enforcement"}),e.jsxs("select",{value:s.update_window_enforcement||"strict",onChange:t=>n("update_window_enforcement",t.target.value),disabled:i,className:"w-full bg-tide-surface text-tide-text rounded px-3 py-2 border border-tide-border-light focus:border-purple-500 focus:outline-none",children:[e.jsx("option",{value:"strict",children:"Strict (never update outside window)"}),e.jsx("option",{value:"advisory",children:"Advisory (warn but allow)"})]}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:"How strictly to enforce update windows"})]})]})]}),e.jsxs("div",{className:"bg-tide-surface rounded-lg p-6 break-inside-avoid mb-6 border border-tide-border",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(z,{className:"w-6 h-6 text-orange-500"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-tide-text",children:"Stale Container Detection"}),e.jsx("p",{className:"text-sm text-tide-text-muted mt-0.5",children:"Automatically detect inactive containers"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text",children:"Enable Stale Detection"}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:"Detect containers removed from compose files"})]}),e.jsx("button",{type:"button",onClick:()=>n("stale_detection_enabled",!s.stale_detection_enabled),disabled:i,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${s.stale_detection_enabled?"bg-teal-500":"bg-red-500"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s.stale_detection_enabled?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text",children:"Stale Threshold (Days)"}),e.jsx("span",{className:"text-sm text-tide-text-muted",children:s.stale_detection_threshold_days||7})]}),e.jsx("input",{type:"range",min:"1",max:"90",value:s.stale_detection_threshold_days||7,onChange:t=>n("stale_detection_threshold_days",parseInt(t.target.value)),disabled:i,className:"w-full h-2 bg-tide-surface rounded-lg appearance-none cursor-pointer accent-teal-500"}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:"Days before container is marked stale"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text",children:"Exclude Dev Containers"}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:"Skip containers ending in -dev from stale detection"})]}),e.jsx("button",{type:"button",onClick:()=>n("stale_detection_exclude_dev",!s.stale_detection_exclude_dev),disabled:i,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${s.stale_detection_exclude_dev?"bg-teal-500":"bg-red-500"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s.stale_detection_exclude_dev?"translate-x-6":"translate-x-1"}`})})]})]})]}),e.jsxs("div",{className:"bg-tide-surface rounded-lg p-6 break-inside-avoid mb-6 border border-tide-border",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Q,{className:"w-6 h-6 text-purple-500"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-tide-text",children:"Cleanup Policy"}),e.jsx("p",{className:"text-sm text-tide-text-muted mt-0.5",children:"Manage old container images"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text",children:"Auto-Remove Old Images"}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:"Remove old images after successful update"})]}),e.jsx("button",{type:"button",onClick:()=>n("cleanup_old_images",!s.cleanup_old_images),disabled:i,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${s.cleanup_old_images?"bg-teal-500":"bg-red-500"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s.cleanup_old_images?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text",children:"Cleanup After Days"}),e.jsx("span",{className:"text-sm text-tide-text-muted",children:s.cleanup_after_days||7})]}),e.jsx("input",{type:"range",min:"0",max:"90",value:s.cleanup_after_days||7,onChange:t=>n("cleanup_after_days",parseInt(t.target.value)),disabled:i,className:"w-full h-2 bg-tide-surface rounded-lg appearance-none cursor-pointer accent-teal-500"}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:"Days to keep old images before cleanup (0 = immediate)"})]})]})]})]})]}),b==="docker"&&e.jsxs("div",{className:"space-y-6",children:[u.length>0&&e.jsx("div",{className:"space-y-4",children:u.filter(t=>t.category==="docker"||t.category==="registry").map(t=>{const r=S(t.category),l=_.has(t.category);return e.jsxs("div",{className:"bg-tide-surface/50 rounded-lg border border-tide-border",children:[e.jsxs("button",{onClick:()=>C(t.category),className:"w-full flex items-center justify-between p-4 hover:bg-tide-surface/70 transition-colors rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(r,{className:"w-5 h-5 text-teal-400"}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-sm font-semibold text-tide-text",children:D(t.category)}),e.jsxs("p",{className:"text-xs text-tide-text-muted mt-0.5",children:[t.settings.length," ",t.settings.length===1?"setting":"settings"]})]})]}),l?e.jsx(T,{className:"w-5 h-5 text-tide-text-muted"}):e.jsx(A,{className:"w-5 h-5 text-tide-text-muted"})]}),!l&&e.jsx("div",{className:"p-4 pt-0 space-y-4",children:t.settings.map(a=>e.jsx("div",{className:"bg-tide-surface/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-sm font-medium text-tide-text",children:[a.key.split("_").map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" "),a.encrypted&&e.jsx("span",{className:"text-xs text-tide-text-muted bg-tide-surface px-1.5 py-0.5 rounded ml-2",children:"Encrypted"})]}),a.description&&e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:a.description})]}),e.jsxs("div",{className:"flex-shrink-0",children:[typeof s[a.key]=="boolean"&&e.jsx("button",{type:"button",onClick:()=>n(a.key,!s[a.key]),disabled:i,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${s[a.key]?"bg-teal-500":"bg-red-500"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s[a.key]?"translate-x-6":"translate-x-1"}`})}),typeof s[a.key]!="boolean"&&e.jsx("input",{type:a.encrypted?"password":typeof s[a.key]=="number"?"number":"text",value:s[a.key]||"",onChange:d=>{const p=typeof s[a.key]=="number"?parseInt(d.target.value)||0:d.target.value;x(a.key,String(p))},disabled:i,className:"w-48 bg-tide-surface text-tide-text text-sm rounded px-3 py-1.5 border border-tide-border-light focus:border-teal-500 focus:outline-none"})]})]})},a.key))})]},t.category)})}),u.length===0&&e.jsxs("div",{className:"columns-1 xl:columns-2 gap-6",style:{columnGap:"1.5rem"},children:[e.jsxs("div",{className:"bg-tide-surface rounded-lg p-6 break-inside-avoid mb-6 border border-tide-border",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(P,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-tide-text",children:"Registry Authentication"}),e.jsx("p",{className:"text-sm text-tide-text-muted mt-0.5",children:"Configure registry credentials"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-tide-text mb-3",children:"Docker Hub"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text mb-2",children:"Username"}),e.jsx("input",{type:"text",value:s.dockerhub_username||"",onChange:t=>x("dockerhub_username",t.target.value),disabled:i,className:"w-full bg-tide-surface text-tide-text rounded px-3 py-2 border border-tide-border-light focus:border-blue-500 focus:outline-none"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-sm font-medium text-tide-text mb-2 flex items-center gap-2",children:["Token",e.jsx("span",{className:"text-xs text-tide-text-muted bg-tide-surface px-1.5 py-0.5 rounded",children:"Encrypted"})]}),e.jsx("input",{type:"password",value:s.dockerhub_token||"",onChange:t=>x("dockerhub_token",t.target.value),disabled:i,className:"w-full bg-tide-surface text-tide-text rounded px-3 py-2 border border-tide-border-light focus:border-blue-500 focus:outline-none"})]}),e.jsxs("button",{type:"button",onClick:()=>E("dockerhub"),disabled:H||i,className:"mt-7 px-4 py-2 bg-tide-surface hover:bg-tide-surface-light text-tide-text rounded-lg text-sm flex items-center gap-2 transition-colors disabled:opacity-50 border border-tide-border",children:[H?e.jsx(g,{className:"w-4 h-4 animate-spin"}):e.jsx($,{className:"w-4 h-4"}),H?"Testing...":"Test Connection"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-tide-text mb-3",children:"GitHub (GHCR)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text mb-2",children:"Username"}),e.jsx("input",{type:"text",value:s.ghcr_username||"",onChange:t=>x("ghcr_username",t.target.value),disabled:i,className:"w-full bg-tide-surface text-tide-text rounded px-3 py-2 border border-tide-border-light focus:border-blue-500 focus:outline-none"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-sm font-medium text-tide-text mb-2 flex items-center gap-2",children:["Token",e.jsx("span",{className:"text-xs text-tide-text-muted bg-tide-surface px-1.5 py-0.5 rounded",children:"Encrypted"})]}),e.jsx("input",{type:"password",value:s.ghcr_token||"",onChange:t=>x("ghcr_token",t.target.value),disabled:i,className:"w-full bg-tide-surface text-tide-text rounded px-3 py-2 border border-tide-border-light focus:border-blue-500 focus:outline-none"})]}),e.jsxs("button",{type:"button",onClick:()=>E("ghcr"),disabled:G||i,className:"mt-7 px-4 py-2 bg-tide-surface hover:bg-tide-surface-light text-tide-text rounded-lg text-sm flex items-center gap-2 transition-colors disabled:opacity-50 border border-tide-border",children:[G?e.jsx(g,{className:"w-4 h-4 animate-spin"}):e.jsx($,{className:"w-4 h-4"}),G?"Testing...":"Test Connection"]})]})]})]})]}),e.jsxs("div",{className:"mt-6 bg-tide-surface/50 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-medium text-tide-text mb-2 flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4 text-blue-500"}),"Configuration Tips"]}),e.jsxs("ul",{className:"text-sm text-tide-text-muted space-y-1 ml-6 list-disc",children:[e.jsx("li",{children:"Registry credentials are optional but recommended to avoid rate limits"}),e.jsx("li",{children:"Docker Hub tokens can be created at hub.docker.com/settings/security"}),e.jsx("li",{children:"GitHub PATs need read:packages scope for GHCR access"}),e.jsx("li",{children:"Docker socket is typically /var/run/docker.sock on Linux systems"}),e.jsx("li",{children:"Compose directory should contain all your docker-compose.yml files"})]})]})]}),e.jsxs("div",{className:"bg-tide-surface rounded-lg p-6 break-inside-avoid mb-6 border border-tide-border",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(I,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-tide-text",children:"Docker Configuration"}),e.jsx("p",{className:"text-sm text-tide-text-muted mt-0.5",children:"Configure Docker daemon connection"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text mb-2",children:"Compose Directory"}),e.jsx("input",{type:"text",value:s.compose_directory||"",onChange:t=>x("compose_directory",t.target.value),disabled:i,placeholder:"/compose",className:"w-full bg-tide-surface text-tide-text rounded px-3 py-2 border border-tide-border-light focus:border-blue-500 focus:outline-none"}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:"Directory containing docker-compose files"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text mb-2",children:"Docker Compose Command"}),e.jsx("input",{type:"text",value:s.docker_compose_command||"",onChange:t=>x("docker_compose_command",t.target.value),disabled:i,placeholder:"docker compose -p homelab -f /compose/base.yml -f /compose/backup.yml",className:"w-full bg-tide-surface text-tide-text rounded px-3 py-2 border border-tide-border-light focus:border-blue-500 focus:outline-none"}),e.jsxs("p",{className:"text-xs text-tide-text-muted mt-1",children:["Docker compose command template. Use ","{compose_file}",", ","{env_file}",", ","{service}"," placeholders"]})]})]}),e.jsxs("div",{className:"mt-6 bg-tide-surface/50 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-medium text-tide-text mb-2 flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4 text-blue-500"}),"About Docker Settings"]}),e.jsxs("ul",{className:"text-sm text-tide-text-muted space-y-1 ml-6 list-disc",children:[e.jsx("li",{children:"Docker socket enables TideWatch to monitor and update containers"}),e.jsx("li",{children:"Registry authentication prevents rate limiting on image pulls"}),e.jsx("li",{children:"Compose paths allow discovery of multi-container applications"}),e.jsx("li",{children:"Test connections verify credentials before saving changes"}),e.jsx("li",{children:"Credentials are stored encrypted in the database"})]})]})]}),e.jsxs("div",{className:"bg-tide-surface rounded-lg p-6 break-inside-avoid mb-6 border border-tide-border",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ze,{className:"w-6 h-6 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-tide-text",children:"My Projects Configuration"}),e.jsx("p",{className:"text-sm text-tide-text-muted mt-0.5",children:"Manage dev containers and dependency tracking"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text",children:"Enable My Projects"}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:"Show My Project toggle and Dependencies tab for dev containers"})]}),e.jsx("button",{type:"button",onClick:()=>n("my_projects_enabled",!s.my_projects_enabled),disabled:i,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${s.my_projects_enabled?"bg-teal-500":"bg-red-500"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s.my_projects_enabled?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-tide-text mb-2 flex items-center gap-2",children:[e.jsx(Le,{className:"w-4 h-4"}),"Projects Directory"]}),e.jsx("input",{type:"text",value:s.projects_directory||"",onChange:t=>x("projects_directory",t.target.value),disabled:i||!s.my_projects_enabled,placeholder:"/projects",className:"w-full bg-tide-surface text-tide-text rounded px-3 py-2 border border-tide-border-light focus:border-blue-500 focus:outline-none disabled:opacity-50"}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:"Directory containing project source code (mounted into Tidewatch)"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text",children:"Auto-Scan Projects"}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:"Automatically discover dev containers on startup"})]}),e.jsx("button",{type:"button",onClick:()=>n("my_projects_auto_scan",!s.my_projects_auto_scan),disabled:i||!s.my_projects_enabled,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none disabled:opacity-50 ${s.my_projects_auto_scan?"bg-teal-500":"bg-red-500"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s.my_projects_auto_scan?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text mb-2",children:"My Projects Docker Compose Command"}),e.jsx("input",{type:"text",value:s.my_projects_compose_command||"",onChange:t=>x("my_projects_compose_command",t.target.value),disabled:i||!s.my_projects_enabled,placeholder:"docker compose",className:"w-full bg-tide-surface text-tide-text rounded px-3 py-2 border border-tide-border-light focus:border-blue-500 focus:outline-none disabled:opacity-50"}),e.jsxs("p",{className:"text-xs text-tide-text-muted mt-1",children:["Simple Docker Compose command for dev containers (use ","{compose_file}",", ","{service}"," placeholders)"]})]}),e.jsxs("div",{className:"pt-2",children:[e.jsx("button",{type:"button",onClick:Ee,disabled:de||!s.my_projects_enabled,className:"w-full px-4 py-2 bg-teal-600 hover:bg-teal-700 text-tide-text rounded-lg font-medium flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:de?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"w-4 h-4 animate-spin"}),"Scanning Projects..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"w-4 h-4"}),"Scan Projects Now"]})}),e.jsxs("p",{className:"text-xs text-tide-text-muted mt-2 text-center",children:["Manually scan ",s.projects_directory||"/projects"," for dev containers"]})]})]}),e.jsxs("div",{className:"mt-4 bg-tide-surface/50 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-medium text-tide-text mb-2 flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4 text-yellow-500"}),"My Projects Tips"]}),e.jsxs("ul",{className:"text-sm text-tide-text-muted space-y-1 ml-6 list-disc",children:[e.jsx("li",{children:"My Projects feature groups dev containers separately on the Dashboard"}),e.jsxs("li",{children:["Auto-scan discovers containers from ",s.projects_directory||"/projects","/*/compose.yaml files"]}),e.jsx("li",{children:"Dependencies tab scans package.json, pyproject.toml, composer.json, etc."}),e.jsx("li",{children:'Use simple "docker compose" command instead of complex production stack'}),e.jsx("li",{children:'Manually mark any container as "My Project" in its Settings tab'})]})]})]}),e.jsxs("div",{className:"bg-tide-surface rounded-lg p-6 break-inside-avoid mb-6 border border-tide-border",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(He,{className:"w-6 h-6 text-primary"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-tide-text",children:"Dockerfile Dependency Tracking"}),e.jsx("p",{className:"text-sm text-tide-text-muted mt-0.5",children:"Automatically track base and build images in Dockerfiles"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text",children:"Auto-Scan Dockerfiles"}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:"Automatically scan Dockerfiles when containers are added"})]}),e.jsx("button",{type:"button",onClick:()=>n("dockerfile_auto_scan",!s.dockerfile_auto_scan),disabled:i,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${s.dockerfile_auto_scan?"bg-teal-500":"bg-red-500"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s.dockerfile_auto_scan?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text mb-2",children:"Update Check Schedule"}),e.jsxs("select",{value:s.dockerfile_scan_schedule||"daily",onChange:t=>n("dockerfile_scan_schedule",t.target.value),disabled:i,className:"w-full bg-tide-surface text-tide-text rounded px-3 py-2 border border-tide-border-light focus:border-blue-500 focus:outline-none disabled:opacity-50",children:[e.jsx("option",{value:"disabled",children:"Disabled"}),e.jsx("option",{value:"daily",children:"Daily (3 AM)"}),e.jsx("option",{value:"weekly",children:"Weekly (Sunday 3 AM)"})]}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:"How often to check for updated base/build images"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text mb-2",children:"Manual Update Check"}),e.jsxs("button",{onClick:async()=>{try{const t=await m.containers.checkAllDockerfileUpdates();o.success(`Checked ${t.total_scanned} Dockerfiles, found ${t.updates_found} updates`)}catch{o.error("Failed to check Dockerfile updates")}},className:"px-4 py-2 bg-primary hover:bg-primary-dark text-tide-text rounded-lg font-medium transition-colors flex items-center gap-2",children:[e.jsx(g,{size:16}),"Check All Dockerfile Updates"]}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:"Manually trigger an update check for all tracked Dockerfiles"})]})]}),e.jsxs("div",{className:"mt-4 bg-tide-surface/50 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-medium text-tide-text mb-2 flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4 text-primary"}),"Dockerfile Tracking Info"]}),e.jsxs("ul",{className:"text-sm text-tide-text-muted space-y-1 ml-6 list-disc",children:[e.jsx("li",{children:"Scans FROM statements in Dockerfiles to track base and build images"}),e.jsx("li",{children:"Tracks multi-stage builds and build arguments"}),e.jsx("li",{children:"Checks for updated image tags daily or weekly"}),e.jsx("li",{children:"View Dockerfile dependencies in the Dependencies tab (My Projects)"}),e.jsx("li",{children:"Notifications sent when updates are available"})]})]})]})]})]}),b==="integrations"&&e.jsxs("div",{className:"space-y-6",children:[u.length>0&&e.jsx("div",{className:"space-y-4",children:u.filter(t=>t.category==="integrations").map(t=>{const r=S(t.category),l=_.has(t.category);return e.jsxs("div",{className:"bg-tide-surface/50 rounded-lg border border-tide-border",children:[e.jsxs("button",{onClick:()=>C(t.category),className:"w-full flex items-center justify-between p-4 hover:bg-tide-surface/70 transition-colors rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(r,{className:"w-5 h-5 text-teal-400"}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-sm font-semibold text-tide-text",children:D(t.category)}),e.jsxs("p",{className:"text-xs text-tide-text-muted mt-0.5",children:[t.settings.length," ",t.settings.length===1?"setting":"settings"]})]})]}),l?e.jsx(T,{className:"w-5 h-5 text-tide-text-muted"}):e.jsx(A,{className:"w-5 h-5 text-tide-text-muted"})]}),!l&&e.jsx("div",{className:"p-4 pt-0 space-y-4",children:t.settings.map(a=>e.jsx("div",{className:"bg-tide-surface/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-sm font-medium text-tide-text",children:[a.key.split("_").map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" "),a.encrypted&&e.jsx("span",{className:"text-xs text-tide-text-muted bg-tide-surface px-1.5 py-0.5 rounded ml-2",children:"Encrypted"})]}),a.description&&e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:a.description})]}),e.jsxs("div",{className:"flex-shrink-0",children:[typeof s[a.key]=="boolean"&&e.jsx("button",{type:"button",onClick:()=>n(a.key,!s[a.key]),disabled:i,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${s[a.key]?"bg-teal-500":"bg-red-500"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s[a.key]?"translate-x-6":"translate-x-1"}`})}),typeof s[a.key]!="boolean"&&e.jsx("input",{type:a.encrypted?"password":typeof s[a.key]=="number"?"number":"text",value:s[a.key]||"",onChange:d=>{const p=typeof s[a.key]=="number"?parseInt(d.target.value)||0:d.target.value;x(a.key,String(p))},disabled:i,className:"w-48 bg-tide-surface text-tide-text text-sm rounded px-3 py-1.5 border border-tide-border-light focus:border-teal-500 focus:outline-none"})]})]})},a.key))})]},t.category)})}),u.length===0&&e.jsxs("div",{className:"columns-1 xl:columns-2 gap-6",style:{columnGap:"1.5rem"},children:[e.jsxs("div",{className:"bg-tide-surface rounded-lg p-6 break-inside-avoid mb-6 border border-tide-border",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Y,{className:"w-6 h-6 text-purple-500"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-tide-text",children:"VulnForge Integration"}),e.jsx("p",{className:"text-sm text-tide-text-muted mt-0.5",children:"Vulnerability scanning with authentication"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text",children:"Enable Integration"}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:"Enable VulnForge vulnerability scanning"})]}),e.jsx("button",{type:"button",onClick:()=>n("vulnforge_enabled",!s.vulnforge_enabled),disabled:i,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${s.vulnforge_enabled?"bg-teal-500":"bg-red-500"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s.vulnforge_enabled?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text mb-2",children:"VulnForge URL"}),e.jsx("input",{type:"text",value:s.vulnforge_url||"",onChange:t=>x("vulnforge_url",t.target.value),disabled:i,placeholder:"http://vulnforge:8787",className:"w-full bg-tide-surface text-tide-text rounded px-3 py-2 border border-tide-border-light focus:border-blue-500 focus:outline-none"}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:"URL to VulnForge instance"})]}),e.jsxs("button",{type:"button",onClick:()=>E("vulnforge"),disabled:O,className:"mt-7 px-4 py-2 bg-tide-surface hover:bg-tide-surface-light text-tide-text rounded-lg text-sm flex items-center gap-2 transition-colors disabled:opacity-50 border border-tide-border",children:[O?e.jsx(g,{className:"w-4 h-4 animate-spin"}):e.jsx($,{className:"w-4 h-4"}),O?"Testing...":"Test Connection"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4 text-blue-500"}),"Authentication"]})}),e.jsx("p",{className:"text-xs text-tide-text-muted mb-3",children:"Select authentication method"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsx("button",{type:"button",onClick:()=>n("vulnforge_auth_type","none"),disabled:i,className:`px-4 py-2 rounded text-sm font-medium transition-colors ${(s.vulnforge_auth_type||"none")==="none"?"bg-teal-500 text-tide-text":"bg-tide-surface text-tide-text hover:bg-tide-surface-light"}`,children:"None"}),e.jsx("button",{type:"button",onClick:()=>n("vulnforge_auth_type","basic_auth"),disabled:i,className:`px-4 py-2 rounded text-sm font-medium transition-colors ${s.vulnforge_auth_type==="basic_auth"?"bg-teal-500 text-tide-text":"bg-tide-surface text-tide-text hover:bg-tide-surface-light"}`,children:"Basic Auth"}),e.jsx("button",{type:"button",onClick:()=>n("vulnforge_auth_type","api_key"),disabled:i,className:`px-4 py-2 rounded text-sm font-medium transition-colors ${s.vulnforge_auth_type==="api_key"?"bg-teal-500 text-tide-text":"bg-tide-surface text-tide-text hover:bg-tide-surface-light"}`,children:"API Key"})]}),(s.vulnforge_auth_type||"none")==="none"&&e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded p-3",children:e.jsx("p",{className:"text-xs text-blue-400",children:"No authentication configured. VulnForge will be accessed without credentials."})}),s.vulnforge_auth_type==="basic_auth"&&e.jsxs("div",{className:"space-y-3 mt-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text mb-2",children:"Username"}),e.jsx("input",{type:"text",value:s.vulnforge_username||"",onChange:t=>x("vulnforge_username",t.target.value),disabled:i,className:"w-full bg-tide-surface text-tide-text rounded px-3 py-2 border border-tide-border-light focus:border-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text mb-2",children:"Password"}),e.jsx("input",{type:"password",value:s.vulnforge_password||"",onChange:t=>x("vulnforge_password",t.target.value),disabled:i,className:"w-full bg-tide-surface text-tide-text rounded px-3 py-2 border border-tide-border-light focus:border-blue-500 focus:outline-none"})]})]}),s.vulnforge_auth_type==="api_key"&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text mb-2",children:"API Key"}),e.jsx("input",{type:"password",value:s.vulnforge_api_key||"",onChange:t=>x("vulnforge_api_key",t.target.value),disabled:i,className:"w-full bg-tide-surface text-tide-text rounded px-3 py-2 border border-tide-border-light focus:border-blue-500 focus:outline-none"})]})]})]})]}),e.jsxs("div",{className:"bg-tide-surface/50 rounded-lg p-4 break-inside-avoid mb-6",children:[e.jsxs("h3",{className:"font-medium text-tide-text mb-2 flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4 text-blue-500"}),"Configuration Tips"]}),e.jsxs("ul",{className:"text-sm text-tide-text-muted space-y-1 ml-6 list-disc",children:[e.jsx("li",{children:"VulnForge URL should point to your VulnForge instance (e.g., http://vulnforge:8787)"}),e.jsx("li",{children:"API key authentication is recommended for automated scanning"}),e.jsx("li",{children:"Basic auth is useful for testing or manual integration"}),e.jsx("li",{children:"Test connection after changing authentication settings"}),e.jsx("li",{children:"VulnForge provides detailed CVE analysis and security metrics"})]})]}),e.jsxs("div",{className:"bg-tide-surface/50 rounded-lg p-4 break-inside-avoid mb-6",children:[e.jsxs("h3",{className:"font-medium text-tide-text mb-2 flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4 text-blue-500"}),"About VulnForge"]}),e.jsxs("ul",{className:"text-sm text-tide-text-muted space-y-1 ml-6 list-disc",children:[e.jsx("li",{children:"VulnForge scans container images for security vulnerabilities"}),e.jsx("li",{children:"Provides CVE tracking and vulnerability data comparisons"}),e.jsx("li",{children:"Enables security-driven update policies"}),e.jsx("li",{children:"Integration is optional but highly recommended for production use"}),e.jsx("li",{children:"Works with Docker Hub, GHCR, and custom registries"})]})]})]})]}),b==="notifications"&&e.jsx("div",{className:"space-y-6",children:u.length>0&&e.jsx("div",{className:"space-y-4",children:u.filter(t=>t.category==="notifications").map(t=>{const r=S(t.category),l=_.has(t.category);return e.jsxs("div",{className:"bg-tide-surface/50 rounded-lg border border-tide-border",children:[e.jsxs("button",{onClick:()=>C(t.category),className:"w-full flex items-center justify-between p-4 hover:bg-tide-surface/70 transition-colors rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(r,{className:"w-5 h-5 text-teal-400"}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-sm font-semibold text-tide-text",children:D(t.category)}),e.jsxs("p",{className:"text-xs text-tide-text-muted mt-0.5",children:[t.settings.length," ",t.settings.length===1?"setting":"settings"]})]})]}),l?e.jsx(T,{className:"w-5 h-5 text-tide-text-muted"}):e.jsx(A,{className:"w-5 h-5 text-tide-text-muted"})]}),!l&&e.jsx("div",{className:"p-4 pt-0 space-y-4",children:t.settings.map(a=>e.jsx("div",{className:"bg-tide-surface/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-sm font-medium text-tide-text",children:[a.key.split("_").map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" "),a.encrypted&&e.jsx("span",{className:"text-xs text-tide-text-muted bg-tide-surface px-1.5 py-0.5 rounded ml-2",children:"Encrypted"})]}),a.description&&e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:a.description})]}),e.jsxs("div",{className:"flex-shrink-0",children:[typeof s[a.key]=="boolean"&&e.jsx("button",{type:"button",onClick:()=>n(a.key,!s[a.key]),disabled:i,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${s[a.key]?"bg-teal-500":"bg-red-500"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s[a.key]?"translate-x-6":"translate-x-1"}`})}),typeof s[a.key]!="boolean"&&e.jsx("input",{type:a.encrypted?"password":typeof s[a.key]=="number"?"number":"text",value:s[a.key]||"",onChange:d=>{const p=typeof s[a.key]=="number"?parseInt(d.target.value)||0:d.target.value;x(a.key,String(p))},disabled:i,className:"w-48 bg-tide-surface text-tide-text text-sm rounded px-3 py-1.5 border border-tide-border-light focus:border-teal-500 focus:outline-none"})]})]})},a.key))})]},t.category)})})}),b==="notifications"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-tide-surface rounded-lg p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{className:"w-6 h-6 text-green-500"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-tide-text",children:"Ntfy Configuration"}),e.jsx("p",{className:"text-sm text-tide-text-muted mt-0.5",children:"Real-time notifications"})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-tide-text",children:"Enable Notifications"}),e.jsx("p",{className:"text-xs text-tide-text-muted mt-1",children:"Enable ntfy push notifications"})]}),e.jsx("button",{type:"button",onClick:()=>n("ntfy_enabled",!s.ntfy_enabled),disabled:i,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${s.ntfy_enabled?"bg-teal-500":"bg-red-500"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s.ntfy_enabled?"translate-x-6":"translate-x-1"}`})})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"flex items-center justify-between mb-1",children:e.jsx("span",{className:"text-sm font-medium text-tide-text",children:"Ntfy Server"})}),e.jsx("p",{className:"text-xs text-tide-text-muted mb-2",children:"ntfy server URL"}),e.jsx("input",{placeholder:"https://ntfy.sh",className:"w-full px-3 py-2 bg-tide-surface border border-tide-border rounded-lg text-tide-text focus:outline-none focus:ring-2 focus:ring-blue-500",type:"text",value:s.ntfy_server||"",onChange:t=>x("ntfy_server",t.target.value),disabled:i})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"flex items-center justify-between mb-1",children:e.jsx("span",{className:"text-sm font-medium text-tide-text",children:"Ntfy Topic"})}),e.jsx("p",{className:"text-xs text-tide-text-muted mb-2",children:"Unique topic name for your notifications"}),e.jsx("input",{placeholder:"my-tidewatch-notifications",className:"w-full px-3 py-2 bg-tide-surface border border-tide-border rounded-lg text-tide-text focus:outline-none focus:ring-2 focus:ring-blue-500",type:"text",value:s.ntfy_topic||"",onChange:t=>x("ntfy_topic",t.target.value),disabled:i})]}),e.jsxs("button",{type:"button",onClick:()=>E("ntfy"),disabled:W,className:"mt-2 px-4 py-2 bg-tide-surface hover:bg-tide-surface-light text-tide-text rounded-lg text-sm flex items-center gap-2 transition-colors disabled:opacity-50 border border-tide-border",children:[W?e.jsx(g,{className:"w-4 h-4 animate-spin"}):e.jsx($,{className:"w-4 h-4"}),W?"Testing...":"Test Connection"]})]})]})]}),e.jsxs("div",{className:"bg-tide-surface/50 border border-tide-border rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ge,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-tide-text",children:"Topic Security"}),e.jsx("p",{className:"text-sm text-tide-text-muted mt-0.5",children:"Best practices"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-4 bg-blue-500/10 rounded-lg border border-blue-500/30",children:[e.jsx("p",{className:"text-sm font-semibold text-tide-text mb-2",children:"Security Considerations"}),e.jsxs("ul",{className:"text-xs text-tide-text-muted space-y-1.5",children:[e.jsx("li",{children:"• Use a unique, hard-to-guess topic name"}),e.jsx("li",{children:"• Anyone with the topic name can receive notifications"}),e.jsx("li",{children:"• Consider using a random string (e.g., UUID) for enhanced security"}),e.jsx("li",{children:"• Avoid using predictable patterns or personal information"})]})]}),e.jsxs("div",{className:"p-4 bg-green-500/10 rounded-lg border border-green-500/30",children:[e.jsx("p",{className:"text-sm font-semibold text-tide-text mb-2",children:"Notification Types"}),e.jsxs("ul",{className:"text-xs text-tide-text-muted space-y-1.5",children:[e.jsx("li",{children:"• Update available alerts"}),e.jsx("li",{children:"• Update success confirmations"}),e.jsx("li",{children:"• Update failure warnings"}),e.jsx("li",{children:"• Security vulnerability notifications"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-tide-surface/50 border border-tide-border rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-tide-text mb-3 flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4 text-blue-400"}),"Configuration Tips"]}),e.jsxs("ul",{className:"text-xs text-tide-text-muted space-y-1.5",children:[e.jsx("li",{children:"• ntfy server URL should include protocol (e.g., https://ntfy.sh)"}),e.jsx("li",{children:"• Topic names should be unique and hard to guess for security"}),e.jsx("li",{children:"• Test notifications to verify server connectivity"}),e.jsx("li",{children:"• Enable notifications to stay informed about container updates"}),e.jsx("li",{children:"• Notifications include update summaries and security alerts"})]})]}),e.jsxs("div",{className:"bg-tide-surface/50 border border-tide-border rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-tide-text mb-3 flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4 text-blue-400"}),"About Notifications"]}),e.jsxs("ul",{className:"text-xs text-tide-text-muted space-y-1.5",children:[e.jsxs("li",{children:["• ntfy provides ",e.jsx("span",{className:"text-green-400",children:"real-time push notifications"})," to your devices"]}),e.jsx("li",{children:"• Notifications alert you of available updates and security issues"}),e.jsx("li",{children:"• Works with the official ntfy app or https://ntfy.sh"}),e.jsxs("li",{children:["• Can be configured for ",e.jsx("span",{className:"text-blue-400",children:"update applied"})," and ",e.jsx("span",{className:"text-red-400",children:"failure"})," events"]}),e.jsx("li",{children:"• Self-hosted ntfy instances are fully supported"})]})]})]})]}),b==="backup"&&e.jsx("div",{className:"space-y-6",children:ke?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(g,{className:"w-8 h-8 animate-spin text-primary"})}):h?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-tide-surface rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(z,{className:"w-6 h-6 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold text-tide-text",children:"Database"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-tide-text-muted",children:"Path:"}),e.jsx("span",{className:"font-mono text-tide-text text-right ml-4 break-all",children:h.stats.database_path})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-tide-text-muted",children:"Size:"}),e.jsxs("span",{className:"font-mono text-tide-text",children:[(h.stats.database_size/1024/1024).toFixed(2)," MB"]})]}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-tide-text-muted",children:"Last Modified:"}),e.jsx("span",{className:"font-mono text-tide-text text-right ml-4",children:new Date(h.stats.database_modified).toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-tide-text-muted",children:"Status:"}),e.jsx("span",{className:`font-mono ${h.stats.database_exists?"text-green-400":"text-red-400"}`,children:h.stats.database_exists?"Exists":"Missing"})]})]})]}),e.jsxs("div",{className:"bg-tide-surface rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Q,{className:"w-6 h-6 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold text-tide-text",children:"Backups"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-tide-text-muted",children:"Total Backups:"}),e.jsx("span",{className:"font-mono text-tide-text",children:h.stats.total_backups})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-tide-text-muted",children:"Total Size:"}),e.jsxs("span",{className:"font-mono text-tide-text",children:[(h.stats.total_size/1024/1024).toFixed(2)," MB"]})]}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-tide-text-muted",children:"Directory:"}),e.jsx("span",{className:"font-mono text-tide-text text-right ml-4 break-all",children:h.stats.backup_directory})]})]})]})]}),e.jsxs("div",{className:"bg-tide-surface rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-tide-text",children:"Backup Management"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("label",{className:`px-4 py-2 bg-tide-surface hover:bg-tide-surface-light text-tide-text rounded-lg text-sm flex items-center gap-2 transition-colors cursor-pointer border border-tide-border ${F?"opacity-50 cursor-not-allowed":""}`,children:[F?e.jsx(g,{className:"w-5 h-5 animate-spin"}):e.jsx(Oe,{className:"w-5 h-5"}),F?"Uploading...":"Upload",e.jsx("input",{ref:K,accept:".json",className:"hidden",type:"file",onChange:$e,disabled:F})]}),e.jsxs("button",{onClick:Ae,disabled:q,className:"px-4 py-2 bg-primary hover:bg-primary/80 text-tide-text rounded-lg text-sm flex items-center gap-2 transition-colors disabled:opacity-50",children:[q?e.jsx(g,{className:"w-5 h-5 animate-spin"}):e.jsx(We,{className:"w-5 h-5"}),q?"Creating...":"Create Backup"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-tide-surface/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-tide-text-muted uppercase tracking-wider",children:"Filename"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-tide-text-muted uppercase tracking-wider",children:"Size"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-tide-text-muted uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-tide-text-muted uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-800",children:h.backups.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-4 py-8 text-center text-tide-text-muted",children:"No backups found. Create your first backup to get started."})}):h.backups.map(t=>e.jsxs("tr",{className:"hover:bg-tide-surface/30 cursor-pointer transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[t.is_safety&&e.jsx("span",{title:"Safety Backup",className:"flex-shrink-0",children:e.jsx(xe,{className:"w-4 h-4 text-blue-400"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-mono text-tide-text",children:t.filename}),t.is_safety&&e.jsx("span",{className:"text-xs text-blue-400 mt-0.5",children:"Protected Safety Backup"})]})]})}),e.jsx("td",{className:"px-4 py-4 text-sm",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-mono text-tide-text",children:R(t.size_bytes)}),e.jsxs("span",{className:"text-xs text-tide-text-muted mt-0.5",children:[t.size_mb.toFixed(2)," MB"]})]})}),e.jsx("td",{className:"px-4 py-4 text-sm",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-tide-text",children:w(new Date(t.created),{addSuffix:!0})}),e.jsx("span",{className:"text-xs text-tide-text-muted mt-0.5",children:new Date(t.created).toLocaleString()})]})}),e.jsx("td",{className:"px-4 py-4 text-sm text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>Fe(t.filename),className:"p-2 text-primary hover:bg-primary/10 rounded transition-colors",title:"Download backup",children:e.jsx(qe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Me(t),className:"p-2 text-orange-500 hover:bg-orange-500/10 rounded transition-colors",title:"Restore from backup",children:e.jsx(k,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Be(t),disabled:t.is_safety,className:"p-2 text-red-500 hover:bg-red-500/10 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:t.is_safety?"Safety backups cannot be deleted":"Delete backup",children:e.jsx(Ke,{className:"w-4 h-4"})})]})})]},t.filename))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-tide-surface/50 border border-tide-border rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-tide-text mb-3 flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4 text-blue-400"}),"Configuration Tips"]}),e.jsxs("ul",{className:"text-xs text-tide-text-muted space-y-1.5",children:[e.jsx("li",{children:"• Create backups before major configuration changes"}),e.jsx("li",{children:"• Backups include all settings and container metadata"}),e.jsx("li",{children:"• Download backups to external storage for disaster recovery"}),e.jsx("li",{children:"• Restoring creates a safety backup of current settings first"}),e.jsx("li",{children:"• Regular backups help prevent data loss from misconfigurations"})]})]}),e.jsxs("div",{className:"bg-tide-surface/50 border border-tide-border rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-tide-text mb-3 flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4 text-blue-400"}),"About Backups"]}),e.jsxs("ul",{className:"text-xs text-tide-text-muted space-y-1.5",children:[e.jsxs("li",{children:["• Backups are stored in ",e.jsx("code",{className:"bg-tide-surface/50 px-1 rounded text-tide-text",children:"/data/backups"})," directory"]}),e.jsx("li",{children:"• Backups include all TideWatch settings (credentials, configuration, policies)"}),e.jsxs("li",{children:["• Restoring creates an automatic ",e.jsx("span",{className:"text-blue-400",children:"safety backup"})," of current settings"]}),e.jsx("li",{children:"• Safety backups are protected and cannot be deleted"}),e.jsx("li",{children:"• Container and update history data is not included in backups"}),e.jsx("li",{children:"• Encrypted values (API keys, tokens) remain encrypted in backups"})]})]})]})]}):e.jsxs("div",{className:"bg-tide-surface rounded-lg p-12 text-center",children:[e.jsx("p",{className:"text-tide-text-muted",children:"Failed to load backup information"}),e.jsx("button",{onClick:v,className:"mt-4 px-4 py-2 bg-primary hover:bg-primary/80 text-tide-text rounded-lg text-sm",children:"Retry"})]})})]})]}),we&&f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-tide-surface rounded-lg max-w-md w-full p-6 border border-tide-border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-tide-text",children:"Delete Backup"}),e.jsx("button",{onClick:()=>{M(!1),N(null)},className:"text-tide-text-muted hover:text-tide-text transition-colors",children:e.jsx(me,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4",children:[e.jsx("p",{className:"text-red-400 text-sm font-medium mb-2",children:"Warning: This action cannot be undone"}),e.jsx("p",{className:"text-tide-text text-sm",children:"Are you sure you want to delete this backup? Once deleted, it cannot be recovered."})]}),e.jsxs("div",{className:"space-y-2 bg-tide-surface/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-tide-text-muted",children:"Filename:"}),e.jsx("span",{className:"text-tide-text font-mono",children:f.filename})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-tide-text-muted",children:"Size:"}),e.jsx("span",{className:"text-tide-text",children:R(f.size_bytes)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-tide-text-muted",children:"Created:"}),e.jsx("span",{className:"text-tide-text",children:w(new Date(f.created),{addSuffix:!0})})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:()=>{M(!1),N(null)},className:"flex-1 px-4 py-2 bg-tide-surface-light hover:bg-tide-border-light text-tide-text rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Ue,className:"flex-1 px-4 py-2 bg-red-500 hover:bg-red-600 text-tide-text rounded-lg transition-colors",children:"Delete Backup"})]})]})]})}),_e&&f&&h&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-tide-surface rounded-lg max-w-md w-full p-6 border border-tide-border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-tide-text",children:"Restore Backup"}),e.jsx("button",{onClick:()=>{B(!1),N(null)},className:"text-tide-text-muted hover:text-tide-text transition-colors",children:e.jsx(me,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-lg p-4",children:[e.jsx("p",{className:"text-orange-400 text-sm font-medium mb-2",children:"Before Restoring"}),e.jsx("p",{className:"text-tide-text text-sm",children:"A safety backup of your current settings will be created automatically before restoring. This ensures you can rollback if needed."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-tide-surface/50 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-tide-text-muted uppercase tracking-wide mb-2",children:"Backup to Restore"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-tide-text-muted",children:"Filename:"}),e.jsx("span",{className:"text-tide-text font-mono text-xs",children:f.filename})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-tide-text-muted",children:"Backup Size:"}),e.jsx("span",{className:"text-tide-text",children:R(f.size_bytes)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-tide-text-muted",children:"Created:"}),e.jsx("span",{className:"text-tide-text",children:w(new Date(f.created),{addSuffix:!0})})]})]})]}),e.jsxs("div",{className:"bg-tide-surface/50 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-tide-text-muted uppercase tracking-wide mb-2",children:"Current Database"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-tide-text-muted",children:"Current Size:"}),e.jsx("span",{className:"text-tide-text",children:R(h.stats.database_size)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-tide-text-muted",children:"Last Modified:"}),e.jsx("span",{className:"text-tide-text",children:w(new Date(h.stats.database_modified),{addSuffix:!0})})]})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:()=>{B(!1),N(null)},className:"flex-1 px-4 py-2 bg-tide-surface-light hover:bg-tide-border-light text-tide-text rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Re,className:"flex-1 px-4 py-2 bg-orange-500 hover:bg-orange-600 text-tide-text rounded-lg transition-colors",children:"Restore Backup"})]})]})]})})]})}export{st as default};
